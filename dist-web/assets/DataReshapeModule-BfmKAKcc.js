var R=Object.defineProperty,D=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var T=(n,e,s)=>e in n?R(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s,r=(n,e)=>{for(var s in e||(e={}))M.call(e,s)&&T(n,s,e[s]);if(g)for(var s of g(e))S.call(e,s)&&T(n,s,e[s]);return n},i=(n,e)=>D(n,I(e));import{C as $}from"./VizSeedBuilder-C39Vgvem.js";import{r as A,e as E}from"./VizSeedCleanupModule-Cwm6WaOq.js";const f=n=>n.fieldSelection,q=(n,e)=>{const{data:s,chartType:c,fieldSelection:d}=e;if(!s||!c)return n;const l=$[c];if(!l)return i(r({},n),{data:e.data,reshapeInfo:{reshapeType:"none",reason:"未找到图表类型的数据要求"}});let o=d.dimensions.length,u=d.measures.length;const a=l.idealDimensions,p=l.idealMeasures;if(o===a&&u===p)return i(r({},n),{data:e.data,reshapeInfo:{reshapeType:"none"}});const t=[];if(o>a){let h=f(e);for(;h.dimensions.length>a;){const F=h.dimensions.length;n=A(n,e);const m=f(e);if(m.dimensions.length>=F)break;h=m,t.push("reduce")}}f(e).measures.length>p&&(n=E(n,e),t.push("elevate"));const y=t.length===1?t[0]:t.length>1?"composite":"none";return i(r({},n),{data:e.data,reshapeInfo:{strategy:`${o}维度${u}指标 → ${a}维度${p}指标`,steps:t,reshapeType:y}})};export{q as d};
//# sourceMappingURL=DataReshapeModule-BfmKAKcc.js.map
