var N=Object.defineProperty,A=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var y=(a,e,s)=>e in a?N(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s,_=(a,e)=>{for(var s in e||(e={}))$.call(e,s)&&y(a,s,e[s]);if(R)for(var s of R(e))b.call(e,s)&&y(a,s,e[s]);return a},E=(a,e)=>A(a,C(e));import{C as j}from"./VizSeedBuilder-C39Vgvem.js";const q=(a,e,s)=>{const i=j[a];return{currentStructure:{dimensions:e.length,measures:s.length,dimensionNames:e,measureNames:s},targetStructure:i}},O=(a,e)=>{const{chartType:s,fieldSelection:i}=e,r=q(s,i.dimensions,i.measures);return E(_({},a),{analysisResult:r})},V=(a,e)=>{const{chartType:s,encodes:i,fieldMap:r,data:t,visualStyle:u}=e;return{chartType:s,data:t||[],fieldMap:r||{},encodes:i||{},visualStyle:u||{}}},w=(a,e)=>e.data||[],D=a=>a.fieldSelection||{dimensions:[],measures:[]},T=(a,e)=>{a.fieldMap&&(Object.keys(a.fieldMap).forEach(s=>{e.dimensions.includes(s)?a.fieldMap[s].location="dimension":e.measures.includes(s)&&(a.fieldMap[s].location="measure")}),e.dimensions.forEach(s=>{a.fieldMap[s]||(a.fieldMap[s]={id:s,type:"string",alias:s,location:"dimension"})}),e.measures.forEach(s=>{a.fieldMap[s]||(a.fieldMap[s]={id:s,type:"number",alias:s,location:"measure"})})),a.fieldSelection&&(a.fieldSelection=e)},H=(a,e)=>{const s=w(a,e),i=D(e);if(i.measures.length<=0)return a;const r=[],{dimensions:t,measures:u}=i;s.forEach(o=>{u.forEach(p=>{const l={};t.forEach(S=>{l[S]=o[S]}),l.__MeasureName__=p,l.__MeasureValue__=o[p]||0,r.push(l)})});const m={dimensions:[...t,"__MeasureName__"],measures:["__MeasureValue__"]};return T(e,m),e.data=r,E(_({},a),{data:e.data,fieldSelection:e.fieldSelection,fieldMap:e.fieldMap})},K=(a,e,s)=>{const i=w(a,e),r=D(e);if(r.dimensions.length<=0)return a;const{dimensions:t,measures:u}=r,m=t[t.length-1],o=t.filter(n=>n!==m),p=[...new Set(i.map(n=>n[m]))],l=[],S=i.reduce((n,d)=>{const c=o.map(f=>d[f]).join("|");return n[c]||(n[c]=[]),n[c].push(d),n},{});Object.entries(S).forEach(([,n])=>{const d=n,c={};if(o.length>0){const f=d[0];o.forEach(h=>{c[h]=f[h]})}p.forEach(f=>{const h=d.find(M=>M[m]===f);u.forEach(M=>{const v=`${f}_${M}`;c[v]=h&&h[M]||0})}),l.push(c)});const g=[];return p.forEach(n=>{u.forEach(d=>{g.push(`${n}_${d}`)})}),T(e,{dimensions:o,measures:g}),e.data=l,E(_({},a),{data:e.data,fieldSelection:e.fieldSelection,fieldMap:e.fieldMap})},Q=(a,e)=>{var s,i;return{chartType:e.chartType,data:e.data,fieldMap:e.fieldMap,encodes:e.encodes,style:e.visualStyle,dimensions:((s=e.fieldSelection)==null?void 0:s.dimensions)||[],measures:((i=e.fieldSelection)==null?void 0:i.measures)||[],rowDimensions:[],columnDimensions:[],theme:e.theme}};export{Q as a,O as c,H as e,K as r,V as v};
//# sourceMappingURL=VizSeedCleanupModule-Cwm6WaOq.js.map
