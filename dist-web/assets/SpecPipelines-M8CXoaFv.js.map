{"version":3,"file":"SpecPipelines-M8CXoaFv.js","sources":["../../src/pipeline/spec/DataModule.ts","../../src/pipeline/spec/StyleModule.ts","../../src/pipeline/spec/init/initVChartBar.ts","../../src/pipeline/spec/init/initVChartLine.ts","../../src/pipeline/spec/init/initVChartArea.ts","../../src/pipeline/spec/init/initVChartScatter.ts","../../src/pipeline/spec/init/initVChartPie.ts","../../src/pipeline/spec/init/initVTable.ts","../../src/pipeline/spec/SpecPipelines.ts"],"sourcesContent":["/**\n * 数据处理模块\n * 可重用的Pipeline步骤，用于处理数据转换和字段映射\n */\n\nimport { PipelineStep, PipelineContext } from '../PipelineCore';\n\n// 数据初始化步骤\nexport const initData: PipelineStep = (spec: any, context: PipelineContext) => {\n  const { data} = context;\n\n  return {\n    ...spec,\n    data: [{\n      id: 'VizSeedData',\n      values: data,\n    }]\n  };\n};\n\n\n","/**\n * 样式处理模块\n * 可重用的Pipeline步骤，用于处理图表样式配置\n */\n\nimport { PipelineStep, PipelineContext } from '../PipelineCore';\n\n// 图例配置步骤\nexport const configureLegend: PipelineStep = (spec: any, context: PipelineContext) => {\n  const { visualStyle } = context;\n  if (!visualStyle) return spec;\n\n  return {\n    ...spec,\n    legends: {\n      visible: visualStyle.legend !== false,\n      orient: 'right',\n      position: 'middle'\n    }\n  };\n};\n\n// 标签配置步骤\nexport const configureLabel: PipelineStep = (spec: any, context: PipelineContext) => {\n  const { visualStyle } = context;\n  if (!visualStyle) return spec;\n\n  return {\n    ...spec,\n    label: {\n      visible: visualStyle.label !== false\n    }\n  };\n};\n\n// 工具提示配置步骤\nexport const configureTooltip: PipelineStep = (spec: any, context: PipelineContext) => {\n  const { visualStyle } = context;\n  if (!visualStyle) return spec;\n\n  return {\n    ...spec,\n    tooltip: {\n      visible: visualStyle.tooltip !== false\n    }\n  };\n};\n\n// 坐标轴配置步骤\nexport const configureAxes: PipelineStep = (spec: any, context: PipelineContext) => {\n  return {\n    ...spec,\n    axes: [\n      {\n        orient: 'bottom',\n        type: 'band'\n      },\n      {\n        orient: 'left',\n        type: 'linear'\n      }\n    ]\n  };\n};\n\n\n// 基于功能设计， 而非图标类型。\nexport const xBandAxis: PipelineStep = (spec: any, context: PipelineContext) => {\n  const result ={ ...spec }\n  if(!result.axes){\n    result.axes = [];\n  }\n\n  result.axes.push({\n    orient: 'bottom',\n    type: 'band'\n  });\n  return result\n}\n\nexport const xLinearAxis: PipelineStep = (spec: any, context: PipelineContext) => {\n  const result ={ ...spec }\n  if(!result.axes){\n    result.axes = [];\n  } \n  result.axes.push({\n    orient: 'bottom',\n    type: 'linear'\n  });\n  return result\n}\n\nexport const yLinaerAxis: PipelineStep = (spec: any, context: PipelineContext) => {\n  const result ={ ...spec }\n  if(!result.axes){\n    result.axes = [];\n  }\n\n  result.axes.push({\n    orient: 'left',\n    type: 'linear'\n  });\n  return result\n}\n\nexport const yBandAxis: PipelineStep = (spec: any, context: PipelineContext) => {\n  const result ={ ...spec }\n  if(!result.axes){\n    result.axes = [];\n  }\n\n  result.axes.push({\n    orient: 'left',\n    type: 'band'\n  });\n  return result\n}\n\nexport const yyLinearAxis: PipelineStep = (spec: any, context: PipelineContext) => {\n  const result ={ ...spec }\n  if(!result.axes){\n    result.axes = [];\n  }\n\n   result.axes.push({\n    orient: 'left',\n    type: 'linear'\n  });\n\n  result.axes.push({\n    orient: 'right',\n    type: 'linear'\n  });\n  return result\n}","/**\n * VChart柱状图/条形图初始化模块\n */\n\nimport { PipelineStep, PipelineContext } from '../../PipelineCore';\n\n// VChart柱状图/条形图初始化（支持多种类型）\nexport const initVChartBar: PipelineStep = (spec: any, context: PipelineContext) => {\n  const chartType = 'bar';\n  const encodes = context.encodes[0] || {};\n  \n  // 根据图表类型设置不同的字段映射\n  const baseSpec = {\n    ...spec,\n    type: chartType,\n    direction: 'horizontal',\n    xField: encodes.x || encodes.category || 'category',\n    yField: encodes.y || encodes.value || 'value',\n  };\n\n  // 为支持分组/颜色的图表类型添加seriesField\n  if (['bar', 'column', 'line', 'area'].includes(chartType)) {\n    baseSpec.seriesField = encodes.color || encodes.group;\n  }\n\n  return baseSpec;\n};","/**\n * VChart折线图初始化模块\n */\n\nimport { PipelineStep, PipelineContext } from '../../PipelineCore';\n\n// VChart折线图初始化\nexport const initVChartLine: PipelineStep = (spec: any, context: PipelineContext) => {\n  const encodes = context.encodes[0] || {};\n  \n  return {\n    ...spec,\n    type: 'line',\n    xField: encodes.x || 'category',\n    yField: encodes.y || 'value',\n    seriesField: encodes.color || encodes.group\n  };\n};","/**\n * VChart面积图初始化模块\n */\n\nimport { PipelineStep, PipelineContext } from '../../PipelineCore';\n\n// VChart面积图初始化\nexport const initVChartArea: PipelineStep = (spec: any, context: PipelineContext) => {\n  const { encodes } = context;\n  const mapping = encodes[0] || {};\n  \n  return {\n    ...spec,\n    type: 'area',\n    xField: mapping.x || 'category',\n    yField: mapping.y || 'value',\n    seriesField: mapping.color || mapping.group\n  };\n};","/**\n * VChart散点图初始化模块\n */\n\nimport { PipelineStep, PipelineContext } from '../../PipelineCore';\n\n// VChart散点图初始化\nexport const initVChartScatter: PipelineStep = (spec: any, context: PipelineContext) => {\n  const encodes = context.encodes[0] || {};\n  \n  return {\n    ...spec,\n    type: 'scatter',\n    xField: encodes.x || 'x',\n    yField: encodes.y || 'y',\n    seriesField: encodes.color || encodes.group\n  };\n};","/**\n * VChart饼图初始化模块\n */\n\nimport { PipelineStep, PipelineContext } from '../../PipelineCore';\n\n// VChart饼图初始化\nexport const initVChartPie: PipelineStep = (spec: any, context: PipelineContext) => {\n  const encodes = context.encodes[0] || {};\n  \n  return {\n    ...spec,\n    type: 'pie',\n    categoryField: encodes.category || encodes.x || 'category',\n    valueField: encodes.value || encodes.y || 'value'\n  };\n};","/**\n * VTable表格初始化模块\n */\n\nimport { PipelineStep, PipelineContext } from '../../PipelineCore';\n\n// VTable表格初始化\nexport const initVTableList: PipelineStep = (spec: any, context: PipelineContext) => {\n  const { data } = context;\n  \n  // // 根据数据字段生成列配置\n  // const columns: any[] = [];\n  // if (data?.fields) {\n  //   data.fields.forEach((field: any) => {\n  //     if (field.name && !field.name.startsWith('__')) { // 排除内部字段\n  //       columns.push({\n  //         field: field.name,\n  //         title: field.alias || field.name,\n  //         width: 120\n  //       });\n  //     }\n  //   });\n  // }\n\n  return {\n    ...spec,\n    type: 'list-table',\n    // columns,\n    records: data || []\n  };\n};","/**\n * 图表规范生成Pipeline函数集合\n * 包含所有图表类型的Spec Pipeline创建函数\n */\n\nimport { pipeline } from '../PipelineCore';\nimport { initData } from './DataModule';\nimport { configureLegend, configureLabel, configureTooltip, configureAxes, xLinearAxis, yBandAxis } from './StyleModule';\nimport { initVChartBar } from './init/initVChartBar';\nimport { initVChartLine } from './init/initVChartLine';\nimport { initVChartArea } from './init/initVChartArea';\nimport { initVChartScatter } from './init/initVChartScatter';\nimport { initVChartPie } from './init/initVChartPie';\nimport { initVTableList } from './init/initVTable';\n\n// 创建BAR图表Pipeline\nexport const createBarSpecPipeline = () => pipeline([\n  initVChartBar,\n  initData,\n  xLinearAxis,\n  yBandAxis,\n  configureLegend,\n  configureLabel,\n  configureTooltip\n], {});\n\n// 创建COLUMN图表Pipeline\nexport const createColumnSpecPipeline = () => pipeline([\n  initVChartBar,\n  initData,\n  configureAxes,\n  configureLegend,\n  configureLabel,\n  configureTooltip\n], {});\n\n// 创建LINE图表Pipeline\nexport const createLineSpecPipeline = () => pipeline([\n  initVChartLine,\n  initData,\n  configureAxes,\n  configureLegend,\n  configureLabel,\n  configureTooltip\n], {});\n\n// 创建AREA图表Pipeline\nexport const createAreaSpecPipeline = () => pipeline([\n  initVChartArea,\n  initData,\n  configureAxes,\n  configureLegend,\n  configureLabel,\n  configureTooltip\n], {});\n\n// 创建SCATTER图表Pipeline\nexport const createScatterSpecPipeline = () => pipeline([\n  initVChartScatter,\n  initData,\n  configureAxes,\n  configureLegend,\n  configureLabel,\n  configureTooltip\n], {});\n\n// 创建PIE图表Pipeline\nexport const createPieSpecPipeline = () => pipeline([\n  initVChartPie,\n  initData,\n  configureLegend,\n  configureLabel,\n  configureTooltip\n], {});\n\n// 创建DONUT图表Pipeline\nexport const createDonutSpecPipeline = () => pipeline([\n  initVChartPie,\n  initData,\n  configureLegend,\n  configureLabel,\n  configureTooltip\n], {});\n\n// 创建TABLE图表Pipeline\nexport const createTableSpecPipeline = () => pipeline([\n  initVTableList,\n  initData\n], {});"],"names":["initData","spec","context","data","__spreadProps","__spreadValues","configureLegend","visualStyle","configureLabel","configureTooltip","configureAxes","xLinearAxis","result","yBandAxis","initVChartBar","chartType","encodes","baseSpec","initVChartLine","initVChartArea","mapping","initVChartScatter","initVChartPie","initVTableList","createBarSpecPipeline","pipeline","createColumnSpecPipeline","createLineSpecPipeline","createAreaSpecPipeline","createScatterSpecPipeline","createPieSpecPipeline","createDonutSpecPipeline","createTableSpecPipeline"],"mappings":"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"}