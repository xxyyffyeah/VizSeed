var kt=Object.defineProperty,xt=Object.defineProperties;var wt=Object.getOwnPropertyDescriptors;var je=Object.getOwnPropertySymbols;var Ct=Object.prototype.hasOwnProperty,Tt=Object.prototype.propertyIsEnumerable;var ze=Math.pow,$e=(s,e,t)=>e in s?kt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,o=(s,e)=>{for(var t in e||(e={}))Ct.call(e,t)&&$e(s,t,e[t]);if(je)for(var t of je(e))Tt.call(e,t)&&$e(s,t,e[t]);return s},u=(s,e)=>xt(s,wt(e));var B=(s,e,t)=>new Promise((n,i)=>{var r=c=>{try{d(t.next(c))}catch(l){i(l)}},a=c=>{try{d(t.throw(c))}catch(l){i(l)}},d=c=>c.done?n(c.value):Promise.resolve(c.value).then(r,a);d((t=t.apply(s,e)).next())});var x;(function(s){s.assertEqual=i=>{};function e(i){}s.assertIs=e;function t(i){throw new Error}s.assertNever=t,s.arrayToEnum=i=>{const r={};for(const a of i)r[a]=a;return r},s.getValidEnumValues=i=>{const r=s.objectKeys(i).filter(d=>typeof i[i[d]]!="number"),a={};for(const d of r)a[d]=i[d];return s.objectValues(a)},s.objectValues=i=>s.objectKeys(i).map(function(r){return i[r]}),s.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const r=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&r.push(a);return r},s.find=(i,r)=>{for(const a of i)if(r(a))return a},s.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,r=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(r)}s.joinValues=n,s.jsonStringifyReplacer=(i,r)=>typeof r=="bigint"?r.toString():r})(x||(x={}));var Be;(function(s){s.mergeShapes=(e,t)=>o(o({},e),t)})(Be||(Be={}));const p=x.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),q=s=>{switch(typeof s){case"undefined":return p.undefined;case"string":return p.string;case"number":return Number.isNaN(s)?p.nan:p.number;case"boolean":return p.boolean;case"function":return p.function;case"bigint":return p.bigint;case"symbol":return p.symbol;case"object":return Array.isArray(s)?p.array:s===null?p.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?p.promise:typeof Map!="undefined"&&s instanceof Map?p.map:typeof Set!="undefined"&&s instanceof Set?p.set:typeof Date!="undefined"&&s instanceof Date?p.date:p.object;default:return p.unknown}},h=x.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class U extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(r){return r.message},n={_errors:[]},i=r=>{for(const a of r.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(t(a));else{let d=n,c=0;for(;c<a.path.length;){const l=a.path[c];c===a.path.length-1?(d[l]=d[l]||{_errors:[]},d[l]._errors.push(t(a))):d[l]=d[l]||{_errors:[]},d=d[l],c++}}};return i(this),n}static assert(e){if(!(e instanceof U))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,x.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const i of this.issues)if(i.path.length>0){const r=i.path[0];t[r]=t[r]||[],t[r].push(e(i))}else n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}U.create=s=>new U(s);const we=(s,e)=>{let t;switch(s.code){case h.invalid_type:s.received===p.undefined?t="Required":t=`Expected ${s.expected}, received ${s.received}`;break;case h.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(s.expected,x.jsonStringifyReplacer)}`;break;case h.unrecognized_keys:t=`Unrecognized key(s) in object: ${x.joinValues(s.keys,", ")}`;break;case h.invalid_union:t="Invalid input";break;case h.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${x.joinValues(s.options)}`;break;case h.invalid_enum_value:t=`Invalid enum value. Expected ${x.joinValues(s.options)}, received '${s.received}'`;break;case h.invalid_arguments:t="Invalid function arguments";break;case h.invalid_return_type:t="Invalid function return type";break;case h.invalid_date:t="Invalid date";break;case h.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(t=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?t=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?t=`Invalid input: must end with "${s.validation.endsWith}"`:x.assertNever(s.validation):s.validation!=="regex"?t=`Invalid ${s.validation}`:t="Invalid";break;case h.too_small:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="bigint"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:t="Invalid input";break;case h.too_big:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?t=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:t="Invalid input";break;case h.custom:t="Invalid input";break;case h.invalid_intersection_types:t="Intersection results could not be merged";break;case h.not_multiple_of:t=`Number must be a multiple of ${s.multipleOf}`;break;case h.not_finite:t="Number must be finite";break;default:t=e.defaultError,x.assertNever(s)}return{message:t}};let At=we;function Dt(){return At}const Mt=s=>{const{data:e,path:t,errorMaps:n,issueData:i}=s,r=[...t,...i.path||[]],a=u(o({},i),{path:r});if(i.message!==void 0)return u(o({},i),{path:r,message:i.message});let d="";const c=n.filter(l=>!!l).slice().reverse();for(const l of c)d=l(a,{data:e,defaultError:d}).message;return u(o({},i),{path:r,message:d})};function f(s,e){const t=Dt(),n=Mt({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,t,t===we?void 0:we].filter(i=>!!i)});s.common.issues.push(n)}class R{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const i of t){if(i.status==="aborted")return y;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static mergeObjectAsync(e,t){return B(this,null,function*(){const n=[];for(const i of t){const r=yield i.key,a=yield i.value;n.push({key:r,value:a})}return R.mergeObjectSync(e,n)})}static mergeObjectSync(e,t){const n={};for(const i of t){const{key:r,value:a}=i;if(r.status==="aborted"||a.status==="aborted")return y;r.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof a.value!="undefined"||i.alwaysSet)&&(n[r.value]=a.value)}return{status:e.value,value:n}}}const y=Object.freeze({status:"aborted"}),se=s=>({status:"dirty",value:s}),O=s=>({status:"valid",value:s}),Ue=s=>s.status==="aborted",qe=s=>s.status==="dirty",Q=s=>s.status==="valid",he=s=>typeof Promise!="undefined"&&s instanceof Promise;var g;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(g||(g={}));class K{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const We=(s,e)=>{if(Q(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new U(s.common.issues);return this._error=t,this._error}}};function b(s){if(!s)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:i}=s;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,d)=>{var l,m;const{message:c}=s;return a.code==="invalid_enum_value"?{message:c!=null?c:d.defaultError}:typeof d.data=="undefined"?{message:(l=c!=null?c:n)!=null?l:d.defaultError}:a.code!=="invalid_type"?{message:d.defaultError}:{message:(m=c!=null?c:t)!=null?m:d.defaultError}},description:i}}class k{get description(){return this._def.description}_getType(e){return q(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:q(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new R,ctx:{common:e.parent.common,data:e.data,parsedType:q(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(he(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var r;const n={common:{issues:[],async:(r=t==null?void 0:t.async)!=null?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:q(e)},i=this._parseSync({data:e,path:n.path,parent:n});return We(n,i)}"~validate"(e){var n,i;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:q(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return Q(r)?{value:r.value}:{issues:t.common.issues}}catch(r){(i=(n=r==null?void 0:r.message)==null?void 0:n.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(r=>Q(r)?{value:r.value}:{issues:t.common.issues})}parseAsync(e,t){return B(this,null,function*(){const n=yield this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error})}safeParseAsync(e,t){return B(this,null,function*(){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:q(e)},i=this._parse({data:e,path:n.path,parent:n}),r=yield he(i)?i:Promise.resolve(i);return We(n,r)})}refine(e,t){const n=i=>typeof t=="string"||typeof t=="undefined"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,r)=>{const a=e(i),d=()=>r.addIssue(o({code:h.custom},n(i)));return typeof Promise!="undefined"&&a instanceof Promise?a.then(c=>c?!0:(d(),!1)):a?!0:(d(),!1)})}refinement(e,t){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof t=="function"?t(n,i):t),!1))}_refinement(e){return new ee({schema:this,typeName:_.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return W.create(this,this._def)}nullable(){return te.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return L.create(this)}promise(){return ge.create(this,this._def)}or(e){return me.create([this,e],this._def)}and(e){return pe.create(this,e,this._def)}transform(e){return new ee(u(o({},b(this._def)),{schema:this,typeName:_.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){const t=typeof e=="function"?e:()=>e;return new Te(u(o({},b(this._def)),{innerType:this,defaultValue:t,typeName:_.ZodDefault}))}brand(){return new Qt(o({typeName:_.ZodBranded,type:this},b(this._def)))}catch(e){const t=typeof e=="function"?e:()=>e;return new Ae(u(o({},b(this._def)),{innerType:this,catchValue:t,typeName:_.ZodCatch}))}describe(e){const t=this.constructor;return new t(u(o({},this._def),{description:e}))}pipe(e){return Ee.create(this,e)}readonly(){return De.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Et=/^c[^\s-]{8,}$/i,Rt=/^[0-9a-z]+$/,Ot=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Nt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Pt=/^[a-z0-9_-]{21}$/i,Vt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ft=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,It=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Lt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Se;const Zt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,jt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,$t=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,zt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Bt=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ut=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,rt="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",qt=new RegExp(`^${rt}$`);function at(s){let e="[0-5]\\d";s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`);const t=s.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Wt(s){return new RegExp(`^${at(s)}$`)}function Kt(s){let e=`${rt}T${at(s)}`;const t=[];return t.push(s.local?"Z?":"Z"),s.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Ht(s,e){return!!((e==="v4"||!e)&&Zt.test(s)||(e==="v6"||!e)&&$t.test(s))}function Gt(s,e){if(!Vt.test(s))return!1;try{const[t]=s.split(".");if(!t)return!1;const n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch(t){return!1}}function Jt(s,e){return!!((e==="v4"||!e)&&jt.test(s)||(e==="v6"||!e)&&zt.test(s))}class G extends k{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==p.string){const r=this._getOrReturnCtx(e);return f(r,{code:h.invalid_type,expected:p.string,received:r.parsedType}),y}const n=new R;let i;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(i=this._getOrReturnCtx(e,i),f(i,{code:h.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if(r.kind==="max")e.data.length>r.value&&(i=this._getOrReturnCtx(e,i),f(i,{code:h.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if(r.kind==="length"){const a=e.data.length>r.value,d=e.data.length<r.value;(a||d)&&(i=this._getOrReturnCtx(e,i),a?f(i,{code:h.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):d&&f(i,{code:h.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),n.dirty())}else if(r.kind==="email")It.test(e.data)||(i=this._getOrReturnCtx(e,i),f(i,{validation:"email",code:h.invalid_string,message:r.message}),n.dirty());else if(r.kind==="emoji")Se||(Se=new RegExp(Lt,"u")),Se.test(e.data)||(i=this._getOrReturnCtx(e,i),f(i,{validation:"emoji",code:h.invalid_string,message:r.message}),n.dirty());else if(r.kind==="uuid")Nt.test(e.data)||(i=this._getOrReturnCtx(e,i),f(i,{validation:"uuid",code:h.invalid_string,message:r.message}),n.dirty());else if(r.kind==="nanoid")Pt.test(e.data)||(i=this._getOrReturnCtx(e,i),f(i,{validation:"nanoid",code:h.invalid_string,message:r.message}),n.dirty());else if(r.kind==="cuid")Et.test(e.data)||(i=this._getOrReturnCtx(e,i),f(i,{validation:"cuid",code:h.invalid_string,message:r.message}),n.dirty());else if(r.kind==="cuid2")Rt.test(e.data)||(i=this._getOrReturnCtx(e,i),f(i,{validation:"cuid2",code:h.invalid_string,message:r.message}),n.dirty());else if(r.kind==="ulid")Ot.test(e.data)||(i=this._getOrReturnCtx(e,i),f(i,{validation:"ulid",code:h.invalid_string,message:r.message}),n.dirty());else if(r.kind==="url")try{new URL(e.data)}catch(a){i=this._getOrReturnCtx(e,i),f(i,{validation:"url",code:h.invalid_string,message:r.message}),n.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),f(i,{validation:"regex",code:h.invalid_string,message:r.message}),n.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(i=this._getOrReturnCtx(e,i),f(i,{code:h.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),n.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(i=this._getOrReturnCtx(e,i),f(i,{code:h.invalid_string,validation:{startsWith:r.value},message:r.message}),n.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(i=this._getOrReturnCtx(e,i),f(i,{code:h.invalid_string,validation:{endsWith:r.value},message:r.message}),n.dirty()):r.kind==="datetime"?Kt(r).test(e.data)||(i=this._getOrReturnCtx(e,i),f(i,{code:h.invalid_string,validation:"datetime",message:r.message}),n.dirty()):r.kind==="date"?qt.test(e.data)||(i=this._getOrReturnCtx(e,i),f(i,{code:h.invalid_string,validation:"date",message:r.message}),n.dirty()):r.kind==="time"?Wt(r).test(e.data)||(i=this._getOrReturnCtx(e,i),f(i,{code:h.invalid_string,validation:"time",message:r.message}),n.dirty()):r.kind==="duration"?Ft.test(e.data)||(i=this._getOrReturnCtx(e,i),f(i,{validation:"duration",code:h.invalid_string,message:r.message}),n.dirty()):r.kind==="ip"?Ht(e.data,r.version)||(i=this._getOrReturnCtx(e,i),f(i,{validation:"ip",code:h.invalid_string,message:r.message}),n.dirty()):r.kind==="jwt"?Gt(e.data,r.alg)||(i=this._getOrReturnCtx(e,i),f(i,{validation:"jwt",code:h.invalid_string,message:r.message}),n.dirty()):r.kind==="cidr"?Jt(e.data,r.version)||(i=this._getOrReturnCtx(e,i),f(i,{validation:"cidr",code:h.invalid_string,message:r.message}),n.dirty()):r.kind==="base64"?Bt.test(e.data)||(i=this._getOrReturnCtx(e,i),f(i,{validation:"base64",code:h.invalid_string,message:r.message}),n.dirty()):r.kind==="base64url"?Ut.test(e.data)||(i=this._getOrReturnCtx(e,i),f(i,{validation:"base64url",code:h.invalid_string,message:r.message}),n.dirty()):x.assertNever(r);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(i=>e.test(i),o({validation:t,code:h.invalid_string},g.errToObj(n)))}_addCheck(e){return new G(u(o({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(o({kind:"email"},g.errToObj(e)))}url(e){return this._addCheck(o({kind:"url"},g.errToObj(e)))}emoji(e){return this._addCheck(o({kind:"emoji"},g.errToObj(e)))}uuid(e){return this._addCheck(o({kind:"uuid"},g.errToObj(e)))}nanoid(e){return this._addCheck(o({kind:"nanoid"},g.errToObj(e)))}cuid(e){return this._addCheck(o({kind:"cuid"},g.errToObj(e)))}cuid2(e){return this._addCheck(o({kind:"cuid2"},g.errToObj(e)))}ulid(e){return this._addCheck(o({kind:"ulid"},g.errToObj(e)))}base64(e){return this._addCheck(o({kind:"base64"},g.errToObj(e)))}base64url(e){return this._addCheck(o({kind:"base64url"},g.errToObj(e)))}jwt(e){return this._addCheck(o({kind:"jwt"},g.errToObj(e)))}ip(e){return this._addCheck(o({kind:"ip"},g.errToObj(e)))}cidr(e){return this._addCheck(o({kind:"cidr"},g.errToObj(e)))}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(o({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!=null?t:!1,local:(n=e==null?void 0:e.local)!=null?n:!1},g.errToObj(e==null?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(o({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision},g.errToObj(e==null?void 0:e.message)))}duration(e){return this._addCheck(o({kind:"duration"},g.errToObj(e)))}regex(e,t){return this._addCheck(o({kind:"regex",regex:e},g.errToObj(t)))}includes(e,t){return this._addCheck(o({kind:"includes",value:e,position:t==null?void 0:t.position},g.errToObj(t==null?void 0:t.message)))}startsWith(e,t){return this._addCheck(o({kind:"startsWith",value:e},g.errToObj(t)))}endsWith(e,t){return this._addCheck(o({kind:"endsWith",value:e},g.errToObj(t)))}min(e,t){return this._addCheck(o({kind:"min",value:e},g.errToObj(t)))}max(e,t){return this._addCheck(o({kind:"max",value:e},g.errToObj(t)))}length(e,t){return this._addCheck(o({kind:"length",value:e},g.errToObj(t)))}nonempty(e){return this.min(1,g.errToObj(e))}trim(){return new G(u(o({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new G(u(o({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new G(u(o({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}G.create=s=>{var e;return new G(o({checks:[],typeName:_.ZodString,coerce:(e=s==null?void 0:s.coerce)!=null?e:!1},b(s)))};function Yt(s,e){const t=(s.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=t>n?t:n,r=Number.parseInt(s.toFixed(i).replace(".","")),a=Number.parseInt(e.toFixed(i).replace(".",""));return r%a/ze(10,i)}class ne extends k{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==p.number){const r=this._getOrReturnCtx(e);return f(r,{code:h.invalid_type,expected:p.number,received:r.parsedType}),y}let n;const i=new R;for(const r of this._def.checks)r.kind==="int"?x.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{code:h.invalid_type,expected:"integer",received:"float",message:r.message}),i.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(n=this._getOrReturnCtx(e,n),f(n,{code:h.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(n=this._getOrReturnCtx(e,n),f(n,{code:h.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):r.kind==="multipleOf"?Yt(e.data,r.value)!==0&&(n=this._getOrReturnCtx(e,n),f(n,{code:h.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{code:h.not_finite,message:r.message}),i.dirty()):x.assertNever(r);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,g.toString(t))}gt(e,t){return this.setLimit("min",e,!1,g.toString(t))}lte(e,t){return this.setLimit("max",e,!0,g.toString(t))}lt(e,t){return this.setLimit("max",e,!1,g.toString(t))}setLimit(e,t,n,i){return new ne(u(o({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:g.toString(i)}]}))}_addCheck(e){return new ne(u(o({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:g.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:g.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:g.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:g.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:g.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:g.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:g.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:g.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:g.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&x.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ne.create=s=>new ne(o({checks:[],typeName:_.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1},b(s)));class ie extends k{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(r){return this._getInvalidInput(e)}if(this._getType(e)!==p.bigint)return this._getInvalidInput(e);let n;const i=new R;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(n=this._getOrReturnCtx(e,n),f(n,{code:h.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(n=this._getOrReturnCtx(e,n),f(n,{code:h.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),f(n,{code:h.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):x.assertNever(r);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return f(t,{code:h.invalid_type,expected:p.bigint,received:t.parsedType}),y}gte(e,t){return this.setLimit("min",e,!0,g.toString(t))}gt(e,t){return this.setLimit("min",e,!1,g.toString(t))}lte(e,t){return this.setLimit("max",e,!0,g.toString(t))}lt(e,t){return this.setLimit("max",e,!1,g.toString(t))}setLimit(e,t,n,i){return new ie(u(o({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:g.toString(i)}]}))}_addCheck(e){return new ie(u(o({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:g.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:g.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:g.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:g.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:g.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ie.create=s=>{var e;return new ie(o({checks:[],typeName:_.ZodBigInt,coerce:(e=s==null?void 0:s.coerce)!=null?e:!1},b(s)))};class Ke extends k{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==p.boolean){const n=this._getOrReturnCtx(e);return f(n,{code:h.invalid_type,expected:p.boolean,received:n.parsedType}),y}return O(e.data)}}Ke.create=s=>new Ke(o({typeName:_.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1},b(s)));class fe extends k{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==p.date){const r=this._getOrReturnCtx(e);return f(r,{code:h.invalid_type,expected:p.date,received:r.parsedType}),y}if(Number.isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return f(r,{code:h.invalid_date}),y}const n=new R;let i;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(i=this._getOrReturnCtx(e,i),f(i,{code:h.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),n.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(i=this._getOrReturnCtx(e,i),f(i,{code:h.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),n.dirty()):x.assertNever(r);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new fe(u(o({},this._def),{checks:[...this._def.checks,e]}))}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:g.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:g.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}fe.create=s=>new fe(o({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:_.ZodDate},b(s)));class He extends k{_parse(e){if(this._getType(e)!==p.symbol){const n=this._getOrReturnCtx(e);return f(n,{code:h.invalid_type,expected:p.symbol,received:n.parsedType}),y}return O(e.data)}}He.create=s=>new He(o({typeName:_.ZodSymbol},b(s)));class Ge extends k{_parse(e){if(this._getType(e)!==p.undefined){const n=this._getOrReturnCtx(e);return f(n,{code:h.invalid_type,expected:p.undefined,received:n.parsedType}),y}return O(e.data)}}Ge.create=s=>new Ge(o({typeName:_.ZodUndefined},b(s)));class Je extends k{_parse(e){if(this._getType(e)!==p.null){const n=this._getOrReturnCtx(e);return f(n,{code:h.invalid_type,expected:p.null,received:n.parsedType}),y}return O(e.data)}}Je.create=s=>new Je(o({typeName:_.ZodNull},b(s)));class Ye extends k{constructor(){super(...arguments),this._any=!0}_parse(e){return O(e.data)}}Ye.create=s=>new Ye(o({typeName:_.ZodAny},b(s)));class Qe extends k{constructor(){super(...arguments),this._unknown=!0}_parse(e){return O(e.data)}}Qe.create=s=>new Qe(o({typeName:_.ZodUnknown},b(s)));class H extends k{_parse(e){const t=this._getOrReturnCtx(e);return f(t,{code:h.invalid_type,expected:p.never,received:t.parsedType}),y}}H.create=s=>new H(o({typeName:_.ZodNever},b(s)));class Xe extends k{_parse(e){if(this._getType(e)!==p.undefined){const n=this._getOrReturnCtx(e);return f(n,{code:h.invalid_type,expected:p.void,received:n.parsedType}),y}return O(e.data)}}Xe.create=s=>new Xe(o({typeName:_.ZodVoid},b(s)));class L extends k{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==p.array)return f(t,{code:h.invalid_type,expected:p.array,received:t.parsedType}),y;if(i.exactLength!==null){const a=t.data.length>i.exactLength.value,d=t.data.length<i.exactLength.value;(a||d)&&(f(t,{code:a?h.too_big:h.too_small,minimum:d?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(f(t,{code:h.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(f(t,{code:h.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((a,d)=>i.type._parseAsync(new K(t,a,t.path,d)))).then(a=>R.mergeArray(n,a));const r=[...t.data].map((a,d)=>i.type._parseSync(new K(t,a,t.path,d)));return R.mergeArray(n,r)}get element(){return this._def.type}min(e,t){return new L(u(o({},this._def),{minLength:{value:e,message:g.toString(t)}}))}max(e,t){return new L(u(o({},this._def),{maxLength:{value:e,message:g.toString(t)}}))}length(e,t){return new L(u(o({},this._def),{exactLength:{value:e,message:g.toString(t)}}))}nonempty(e){return this.min(1,e)}}L.create=(s,e)=>new L(o({type:s,minLength:null,maxLength:null,exactLength:null,typeName:_.ZodArray},b(e)));function Y(s){if(s instanceof T){const e={};for(const t in s.shape){const n=s.shape[t];e[t]=W.create(Y(n))}return new T(u(o({},s._def),{shape:()=>e}))}else return s instanceof L?new L(u(o({},s._def),{type:Y(s.element)})):s instanceof W?W.create(Y(s.unwrap())):s instanceof te?te.create(Y(s.unwrap())):s instanceof J?J.create(s.items.map(e=>Y(e))):s}class T extends k{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=x.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==p.object){const l=this._getOrReturnCtx(e);return f(l,{code:h.invalid_type,expected:p.object,received:l.parsedType}),y}const{status:n,ctx:i}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),d=[];if(!(this._def.catchall instanceof H&&this._def.unknownKeys==="strip"))for(const l in i.data)a.includes(l)||d.push(l);const c=[];for(const l of a){const m=r[l],w=i.data[l];c.push({key:{status:"valid",value:l},value:m._parse(new K(i,w,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof H){const l=this._def.unknownKeys;if(l==="passthrough")for(const m of d)c.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(l==="strict")d.length>0&&(f(i,{code:h.unrecognized_keys,keys:d}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const m of d){const w=i.data[m];c.push({key:{status:"valid",value:m},value:l._parse(new K(i,w,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(()=>B(this,null,function*(){const l=[];for(const m of c){const w=yield m.key,E=yield m.value;l.push({key:w,value:E,alwaysSet:m.alwaysSet})}return l})).then(l=>R.mergeObjectSync(n,l)):R.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return g.errToObj,new T(o(u(o({},this._def),{unknownKeys:"strict"}),e!==void 0?{errorMap:(t,n)=>{var r,a,d,c;const i=(d=(a=(r=this._def).errorMap)==null?void 0:a.call(r,t,n).message)!=null?d:n.defaultError;return t.code==="unrecognized_keys"?{message:(c=g.errToObj(e).message)!=null?c:i}:{message:i}}}:{}))}strip(){return new T(u(o({},this._def),{unknownKeys:"strip"}))}passthrough(){return new T(u(o({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new T(u(o({},this._def),{shape:()=>o(o({},this._def.shape()),e)}))}merge(e){return new T({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>o(o({},this._def.shape()),e._def.shape()),typeName:_.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new T(u(o({},this._def),{catchall:e}))}pick(e){const t={};for(const n of x.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new T(u(o({},this._def),{shape:()=>t}))}omit(e){const t={};for(const n of x.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new T(u(o({},this._def),{shape:()=>t}))}deepPartial(){return Y(this)}partial(e){const t={};for(const n of x.objectKeys(this.shape)){const i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()}return new T(u(o({},this._def),{shape:()=>t}))}required(e){const t={};for(const n of x.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let r=this.shape[n];for(;r instanceof W;)r=r._def.innerType;t[n]=r}return new T(u(o({},this._def),{shape:()=>t}))}keyof(){return ot(x.objectKeys(this.shape))}}T.create=(s,e)=>new T(o({shape:()=>s,unknownKeys:"strip",catchall:H.create(),typeName:_.ZodObject},b(e)));T.strictCreate=(s,e)=>new T(o({shape:()=>s,unknownKeys:"strict",catchall:H.create(),typeName:_.ZodObject},b(e)));T.lazycreate=(s,e)=>new T(o({shape:s,unknownKeys:"strip",catchall:H.create(),typeName:_.ZodObject},b(e)));class me extends k{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function i(r){for(const d of r)if(d.result.status==="valid")return d.result;for(const d of r)if(d.result.status==="dirty")return t.common.issues.push(...d.ctx.common.issues),d.result;const a=r.map(d=>new U(d.ctx.common.issues));return f(t,{code:h.invalid_union,unionErrors:a}),y}if(t.common.async)return Promise.all(n.map(r=>B(this,null,function*(){const a=u(o({},t),{common:u(o({},t.common),{issues:[]}),parent:null});return{result:yield r._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}}))).then(i);{let r;const a=[];for(const c of n){const l=u(o({},t),{common:u(o({},t.common),{issues:[]}),parent:null}),m=c._parseSync({data:t.data,path:t.path,parent:l});if(m.status==="valid")return m;m.status==="dirty"&&!r&&(r={result:m,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(r)return t.common.issues.push(...r.ctx.common.issues),r.result;const d=a.map(c=>new U(c));return f(t,{code:h.invalid_union,unionErrors:d}),y}}get options(){return this._def.options}}me.create=(s,e)=>new me(o({options:s,typeName:_.ZodUnion},b(e)));function Ce(s,e){const t=q(s),n=q(e);if(s===e)return{valid:!0,data:s};if(t===p.object&&n===p.object){const i=x.objectKeys(e),r=x.objectKeys(s).filter(d=>i.indexOf(d)!==-1),a=o(o({},s),e);for(const d of r){const c=Ce(s[d],e[d]);if(!c.valid)return{valid:!1};a[d]=c.data}return{valid:!0,data:a}}else if(t===p.array&&n===p.array){if(s.length!==e.length)return{valid:!1};const i=[];for(let r=0;r<s.length;r++){const a=s[r],d=e[r],c=Ce(a,d);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return t===p.date&&n===p.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}class pe extends k{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=(r,a)=>{if(Ue(r)||Ue(a))return y;const d=Ce(r.value,a.value);return d.valid?((qe(r)||qe(a))&&t.dirty(),{status:t.value,value:d.data}):(f(n,{code:h.invalid_intersection_types}),y)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([r,a])=>i(r,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}pe.create=(s,e,t)=>new pe(o({left:s,right:e,typeName:_.ZodIntersection},b(t)));class J extends k{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.array)return f(n,{code:h.invalid_type,expected:p.array,received:n.parsedType}),y;if(n.data.length<this._def.items.length)return f(n,{code:h.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),y;!this._def.rest&&n.data.length>this._def.items.length&&(f(n,{code:h.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map((a,d)=>{const c=this._def.items[d]||this._def.rest;return c?c._parse(new K(n,a,n.path,d)):null}).filter(a=>!!a);return n.common.async?Promise.all(r).then(a=>R.mergeArray(t,a)):R.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new J(u(o({},this._def),{rest:e}))}}J.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new J(o({items:s,typeName:_.ZodTuple,rest:null},b(e)))};class et extends k{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.map)return f(n,{code:h.invalid_type,expected:p.map,received:n.parsedType}),y;const i=this._def.keyType,r=this._def.valueType,a=[...n.data.entries()].map(([d,c],l)=>({key:i._parse(new K(n,d,n.path,[l,"key"])),value:r._parse(new K(n,c,n.path,[l,"value"]))}));if(n.common.async){const d=new Map;return Promise.resolve().then(()=>B(this,null,function*(){for(const c of a){const l=yield c.key,m=yield c.value;if(l.status==="aborted"||m.status==="aborted")return y;(l.status==="dirty"||m.status==="dirty")&&t.dirty(),d.set(l.value,m.value)}return{status:t.value,value:d}}))}else{const d=new Map;for(const c of a){const l=c.key,m=c.value;if(l.status==="aborted"||m.status==="aborted")return y;(l.status==="dirty"||m.status==="dirty")&&t.dirty(),d.set(l.value,m.value)}return{status:t.value,value:d}}}}et.create=(s,e,t)=>new et(o({valueType:e,keyType:s,typeName:_.ZodMap},b(t)));class re extends k{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.set)return f(n,{code:h.invalid_type,expected:p.set,received:n.parsedType}),y;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(f(n,{code:h.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(f(n,{code:h.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const r=this._def.valueType;function a(c){const l=new Set;for(const m of c){if(m.status==="aborted")return y;m.status==="dirty"&&t.dirty(),l.add(m.value)}return{status:t.value,value:l}}const d=[...n.data.values()].map((c,l)=>r._parse(new K(n,c,n.path,l)));return n.common.async?Promise.all(d).then(c=>a(c)):a(d)}min(e,t){return new re(u(o({},this._def),{minSize:{value:e,message:g.toString(t)}}))}max(e,t){return new re(u(o({},this._def),{maxSize:{value:e,message:g.toString(t)}}))}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}re.create=(s,e)=>new re(o({valueType:s,minSize:null,maxSize:null,typeName:_.ZodSet},b(e)));class tt extends k{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}tt.create=(s,e)=>new tt(o({getter:s,typeName:_.ZodLazy},b(e)));class st extends k{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return f(t,{received:t.data,code:h.invalid_literal,expected:this._def.value}),y}return{status:"valid",value:e.data}}get value(){return this._def.value}}st.create=(s,e)=>new st(o({value:s,typeName:_.ZodLiteral},b(e)));function ot(s,e){return new X(o({values:s,typeName:_.ZodEnum},b(e)))}class X extends k{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return f(t,{expected:x.joinValues(n),received:t.parsedType,code:h.invalid_type}),y}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return f(t,{received:t.data,code:h.invalid_enum_value,options:n}),y}return O(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return X.create(e,o(o({},this._def),t))}exclude(e,t=this._def){return X.create(this.options.filter(n=>!e.includes(n)),o(o({},this._def),t))}}X.create=ot;class nt extends k{_parse(e){const t=x.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==p.string&&n.parsedType!==p.number){const i=x.objectValues(t);return f(n,{expected:x.joinValues(i),received:n.parsedType,code:h.invalid_type}),y}if(this._cache||(this._cache=new Set(x.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=x.objectValues(t);return f(n,{received:n.data,code:h.invalid_enum_value,options:i}),y}return O(e.data)}get enum(){return this._def.values}}nt.create=(s,e)=>new nt(o({values:s,typeName:_.ZodNativeEnum},b(e)));class ge extends k{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.promise&&t.common.async===!1)return f(t,{code:h.invalid_type,expected:p.promise,received:t.parsedType}),y;const n=t.parsedType===p.promise?t.data:Promise.resolve(t.data);return O(n.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ge.create=(s,e)=>new ge(o({type:s,typeName:_.ZodPromise},b(e)));class ee extends k{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,r={addIssue:a=>{f(n,a),a.fatal?t.abort():t.dirty()},get path(){return n.path}};if(r.addIssue=r.addIssue.bind(r),i.type==="preprocess"){const a=i.transform(n.data,r);if(n.common.async)return Promise.resolve(a).then(d=>B(this,null,function*(){if(t.value==="aborted")return y;const c=yield this._def.schema._parseAsync({data:d,path:n.path,parent:n});return c.status==="aborted"?y:c.status==="dirty"||t.value==="dirty"?se(c.value):c}));{if(t.value==="aborted")return y;const d=this._def.schema._parseSync({data:a,path:n.path,parent:n});return d.status==="aborted"?y:d.status==="dirty"||t.value==="dirty"?se(d.value):d}}if(i.type==="refinement"){const a=d=>{const c=i.refinement(d,r);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(n.common.async===!1){const d=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return d.status==="aborted"?y:(d.status==="dirty"&&t.dirty(),a(d.value),{status:t.value,value:d.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(d=>d.status==="aborted"?y:(d.status==="dirty"&&t.dirty(),a(d.value).then(()=>({status:t.value,value:d.value}))))}if(i.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Q(a))return y;const d=i.transform(a.value,r);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:d}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Q(a)?Promise.resolve(i.transform(a.value,r)).then(d=>({status:t.value,value:d})):y);x.assertNever(i)}}ee.create=(s,e,t)=>new ee(o({schema:s,typeName:_.ZodEffects,effect:e},b(t)));ee.createWithPreprocess=(s,e,t)=>new ee(o({schema:e,effect:{type:"preprocess",transform:s},typeName:_.ZodEffects},b(t)));class W extends k{_parse(e){return this._getType(e)===p.undefined?O(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}W.create=(s,e)=>new W(o({innerType:s,typeName:_.ZodOptional},b(e)));class te extends k{_parse(e){return this._getType(e)===p.null?O(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}te.create=(s,e)=>new te(o({innerType:s,typeName:_.ZodNullable},b(e)));class Te extends k{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===p.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Te.create=(s,e)=>new Te(o({innerType:s,typeName:_.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default},b(e)));class Ae extends k{_parse(e){const{ctx:t}=this._processInputParams(e),n=u(o({},t),{common:u(o({},t.common),{issues:[]})}),i=this._def.innerType._parse({data:n.data,path:n.path,parent:o({},n)});return he(i)?i.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new U(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new U(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Ae.create=(s,e)=>new Ae(o({innerType:s,typeName:_.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch},b(e)));class it extends k{_parse(e){if(this._getType(e)!==p.nan){const n=this._getOrReturnCtx(e);return f(n,{code:h.invalid_type,expected:p.nan,received:n.parsedType}),y}return{status:"valid",value:e.data}}}it.create=s=>new it(o({typeName:_.ZodNaN},b(s)));class Qt extends k{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ee extends k{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return B(this,null,function*(){const r=yield this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?y:r.status==="dirty"?(t.dirty(),se(r.value)):this._def.out._parseAsync({data:r.value,path:n.path,parent:n})});{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?y:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,t){return new Ee({in:e,out:t,typeName:_.ZodPipeline})}}class De extends k{_parse(e){const t=this._def.innerType._parse(e),n=i=>(Q(i)&&(i.value=Object.freeze(i.value)),i);return he(t)?t.then(i=>n(i)):n(t)}unwrap(){return this._def.innerType}}De.create=(s,e)=>new De(o({innerType:s,typeName:_.ZodReadonly},b(e)));var _;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(_||(_={}));H.create;L.create;me.create;pe.create;J.create;const Xt=X.create;ge.create;W.create;te.create;var v=(s=>(s.BAR="bar",s.BAR_STACKED="bar_stacked",s.BAR_GROUPED="bar_grouped",s.BAR_PERCENT="bar_percent",s.COLUMN="column",s.COLUMN_STACKED="column_stacked",s.COLUMN_GROUPED="column_grouped",s.COLUMN_PERCENT="column_percent",s.LINE="line",s.AREA="area",s.AREA_STACKED="area_stacked",s.AREA_PERCENT="area_percent",s.SCATTER="scatter",s.PIE="pie",s.DONUT="donut",s.TABLE="table",s.PIVOT_TABLE="pivottable",s.PIVOT_CHART="pivotchart",s))(v||{});const es=Xt(["bar","bar_stacked","bar_grouped","bar_percent","column","column_stacked","column_grouped","column_percent","line","area","area_stacked","area_percent","scatter","pie","donut","table","pivottable","pivotchart"]).transform(s=>({bar:"bar",bar_stacked:"bar_stacked",bar_grouped:"bar_grouped",bar_percent:"bar_percent",column:"column",column_stacked:"column_stacked",column_grouped:"column_grouped",column_percent:"column_percent",line:"line",area:"area",area_stacked:"area_stacked",area_percent:"area_percent",scatter:"scatter",pie:"pie",donut:"donut",table:"table",pivottable:"pivottable",pivotchart:"pivotchart"})[s]);function ts(s){return es.parse(s)}const Re={bar:{channels:{dimensionChannels:["x","color"],measureChannels:["y"]},idealDimensions:1,idealMeasures:1,minDimensions:1,minMeasures:1,chartType:"bar"},bar_stacked:{channels:{dimensionChannels:["x","color"],measureChannels:["y"]},idealDimensions:2,idealMeasures:1,minDimensions:2,minMeasures:1,chartType:"bar_stacked"},bar_grouped:{channels:{dimensionChannels:["x","color"],measureChannels:["y"]},idealDimensions:2,idealMeasures:1,minDimensions:2,minMeasures:1,chartType:"bar_grouped"},bar_percent:{channels:{dimensionChannels:["x","color"],measureChannels:["y"]},idealDimensions:2,idealMeasures:1,minDimensions:2,minMeasures:1,chartType:"bar_percent"},column:{channels:{dimensionChannels:["x","color"],measureChannels:["y"]},idealDimensions:1,idealMeasures:1,minDimensions:1,minMeasures:1,chartType:"column"},column_stacked:{channels:{dimensionChannels:["x","color"],measureChannels:["y"]},idealDimensions:2,idealMeasures:1,minDimensions:2,minMeasures:1,chartType:"column_stacked"},column_grouped:{channels:{dimensionChannels:["x","color"],measureChannels:["y"]},idealDimensions:2,idealMeasures:1,minDimensions:2,minMeasures:1,chartType:"column_grouped"},column_percent:{channels:{dimensionChannels:["x","color"],measureChannels:["y"]},idealDimensions:2,idealMeasures:1,minDimensions:2,minMeasures:1,chartType:"column_percent"},line:{channels:{dimensionChannels:["x","color"],measureChannels:["y"]},idealDimensions:1,idealMeasures:1,minDimensions:1,minMeasures:1,chartType:"line"},area:{channels:{dimensionChannels:["x","color"],measureChannels:["y"]},idealDimensions:1,idealMeasures:1,minDimensions:1,minMeasures:1,chartType:"area"},area_stacked:{channels:{dimensionChannels:["x","color"],measureChannels:["y"]},idealDimensions:2,idealMeasures:1,minDimensions:2,minMeasures:1,chartType:"area_stacked"},area_percent:{channels:{dimensionChannels:["x","color"],measureChannels:["y"]},idealDimensions:2,idealMeasures:1,minDimensions:2,minMeasures:1,chartType:"area_percent"},scatter:{channels:{dimensionChannels:["color"],measureChannels:["x","y"]},idealDimensions:0,idealMeasures:2,minDimensions:0,minMeasures:2,chartType:"scatter"},pie:{channels:{dimensionChannels:["category"],measureChannels:["value"]},idealDimensions:1,idealMeasures:1,minDimensions:1,minMeasures:1,chartType:"pie"},donut:{channels:{dimensionChannels:["category"],measureChannels:["value"]},idealDimensions:1,idealMeasures:1,minDimensions:1,minMeasures:1,chartType:"donut"},table:{channels:{dimensionChannels:["rowDimension","columnDimension"],measureChannels:["measure"]},idealDimensions:1,idealMeasures:1,minDimensions:0,minMeasures:0,chartType:"table"},pivottable:{channels:{dimensionChannels:["rowDimension","columnDimension"],measureChannels:["measure"]},idealDimensions:2,idealMeasures:1,minDimensions:1,minMeasures:1,chartType:"pivottable"},pivotchart:{channels:{dimensionChannels:["rowDimension","columnDimension"],measureChannels:["measure"]},idealDimensions:2,idealMeasures:1,minDimensions:1,minMeasures:1,chartType:"pivotchart"}},ss=()=>({title:"",color:[],legend:{visible:!0,orient:"right",position:"middle"},label:{visible:!0},tooltip:{visible:!0},animation:{visible:!0},responsive:{widthMode:"standard",heightMode:"adaptive"},yAxis:{},xAxis:{},columnStack:{stackRadius:5},pie:{},pivotPie:{},doughnut:{},line:{lineStyle:{}}});class ce{static inferFields(e,t){if(!e||e.length===0)return[];const n=new Set;e.forEach(a=>{Object.keys(a).forEach(d=>n.add(d))});const i=Array.from(n),r=[];for(const a of i){const d=e.map(l=>l[a]).filter(l=>l!=null);if(d.length===0)continue;const c=this.inferSingleField(a,d,t);r.push(c)}return r}static inferSingleField(e,t,n){if(n!=null&&n.typeHint){const r=n.typeHint(e,t);if(r)return this.createFieldMeta(e,r,t,n)}const i=this.inferFieldType(t,n==null?void 0:n.autoConvertDates);return this.createFieldMeta(e,i,t,n)}static inferFieldType(e,t=!0){const n=e.slice(0,Math.min(100,e.length));return n.filter(a=>typeof a=="number"&&!isNaN(a)).length/n.length>.8?"number":n.filter(a=>typeof a=="boolean").length/n.length>.8?"boolean":t&&n.filter(d=>this.isDateLike(d)).length/n.length>.8?"date":"string"}static isDateLike(e){return e instanceof Date?!0:typeof e!="string"?!1:[/^\d{4}-\d{2}-\d{2}$/,/^\d{4}\/\d{2}\/\d{2}$/,/^\d{2}\/\d{2}\/\d{4}$/,/^\d{4}-\d{2}$/,/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/].some(n=>n.test(e))&&!isNaN(Date.parse(e))}static createFieldMeta(e,t,n,i){const r=this.calculateFieldStats(n);let a;return t==="number"?i!=null&&i.numericRoleHint?a=i.numericRoleHint(e,n):a=this.inferNumericRole(e,n,r):a="dimension",{name:e,type:t,role:a,nullable:r.nullCount>0,unique:r.uniqueCount===r.count,aggregation:a==="measure"?(i==null?void 0:i.defaultAggregation)||"sum":void 0,isDiscrete:a==="dimension"}}static inferNumericRole(e,t,n){const i=e.toLowerCase(),r=["id","year","month","day","code","number","rank","level","grade"],a=["amount","count","sum","total","avg","mean","price","cost","value","score","rate","percent","sales","profit","revenue"];if(r.some(c=>i.includes(c)))return"dimension";if(a.some(c=>i.includes(c)))return"measure";const d=n.uniqueCount/n.count;return d>.9||d<.1&&n.max&&n.min&&n.max-n.min<10?"dimension":"measure"}static calculateFieldStats(e){const t=e.filter(r=>r!=null),n=new Set(t),i={count:e.length,nullCount:e.length-t.length,uniqueCount:n.size};if(t.length>0){const r=t.filter(a=>typeof a=="number"&&!isNaN(a));if(r.length===t.length){i.min=Math.min(...r),i.max=Math.max(...r),i.mean=r.reduce((c,l)=>c+l,0)/r.length;const a=[...r].sort((c,l)=>c-l),d=Math.floor(a.length/2);i.median=a.length%2===0?(a[d-1]+a[d])/2:a[d]}else{const a=[...t].sort();i.min=a[0],i.max=a[a.length-1]}}return i}static getFieldValues(e,t){return[...new Set(t.map(n=>n[e]).filter(n=>n!=null))]}static getFieldStats(e,t){const n=t.map(i=>i[e]);return this.calculateFieldStats(n)}}class ye{constructor(e,t){if(Array.isArray(e))this.rows=e,this.fields=ce.inferFields(this.rows,t);else{const n=e;this.rows=n.rows,n.fields?this.fields=n.fields:this.fields=ce.inferFields(this.rows,n.inferenceOptions)}}static fromRows(e,t){return new ye({rows:e,inferenceOptions:t})}getFieldValues(e){return ce.getFieldValues(e,this.rows)}getFieldStats(e){return ce.getFieldStats(e,this.rows)}getField(e){return this.fields.find(t=>t.name===e)}getDimensions(){return this.fields.filter(e=>e.role==="dimension")}getMeasures(){return this.fields.filter(e=>e.role==="measure")}clone(){return new ye({fields:JSON.parse(JSON.stringify(this.fields)),rows:JSON.parse(JSON.stringify(this.rows))})}addField(e){this.fields.push(e)}removeField(e){this.fields=this.fields.filter(t=>t.name!==e)}}const C=(s,e)=>t=>s.reduce((n,i)=>i(n,t),e),N=(s,e)=>{const{data:t}=e;return u(o({},s),{data:[{id:"VizSeedData",values:t}]})},P=(s,e)=>{const{visualStyle:t}=e;return t?u(o({},s),{legends:u(o({},t.legend),{visible:t.legend.visible!==!1})}):s},V=(s,e)=>{const{visualStyle:t}=e;return t?u(o({},s),{label:u(o({},t.label),{visible:t.label.visible!==!1})}):s},F=(s,e)=>{const{visualStyle:t}=e;return t?u(o({},s),{tooltip:{visible:t.tooltip!==!1}}):s},dt=(s,e)=>u(o({},s),{axes:[{orient:"bottom",type:"band"},{orient:"left",type:"linear"}]}),ae=(s,e)=>{const t=o({},s);return t.axes||(t.axes=[]),t.axes.push({orient:"bottom",type:"band"}),t},Oe=(s,e)=>{const t=o({},s);return t.axes||(t.axes=[]),t.axes.push({orient:"bottom",type:"linear"}),t},oe=(s,e)=>{const t=o({},s);return t.axes||(t.axes=[]),t.axes.push({orient:"left",type:"linear"}),t},Ne=(s,e)=>{const t=o({},s);return t.axes||(t.axes=[]),t.axes.push({orient:"left",type:"band"}),t},Pe=(s,e)=>u(o({},s),{stack:!0}),Ve=(s,e)=>{const t="bar",n=e.encodes[0]||{};return u(o({},s),{type:t,direction:"horizontal",xField:n.x||n.category||"category",yField:n.y||n.value||"value",seriesField:n.group||"group"})},ve=(s,e)=>{const{visualStyle:t}=e;return t?u(o({},s),{color:t.color}):s},ct=()=>C([Ve,N,Pe,Oe,Ne,ve,P,V,F],{}),ns=ct,is=(s,e)=>{const t=e.encodes[0]||{};return u(o({},s),{yField:[t.y,t.group]})},rs=(s,e)=>{const t=e.encodes[0]||{};return u(o({},s),{xField:[t.x,t.group]})},as=()=>C([Ve,N,is,Oe,Ne,ve,P,V,F],{}),Fe=(s,e)=>u(o({},s),{stack:!0,percent:!0}),os=()=>C([Ve,N,Fe,Oe,Ne,ve,P,V,F],{}),Ie=(s,e)=>{const t="bar",n=e.encodes[0]||{};return u(o({},s),{type:t,xField:n.x||n.category||"category",yField:n.y||n.value||"value",seriesField:n.group||n.color||"group"})},lt=()=>C([Ie,N,Pe,ae,oe,P,V,F],{}),ds=lt,cs=()=>C([Ie,N,rs,ae,oe,P,V,F],{}),ls=()=>C([Ie,N,Fe,ae,oe,P,V,F],{}),us=(s,e)=>{const t=e.encodes[0]||{};return u(o({},s),{type:"line",xField:t.x||"category",yField:t.y||"value",seriesField:t.color||t.group})},Le=(s,e)=>{if(!s.data||!s.xField||!Array.isArray(s.data))return s;const t=s.xField,n=s.seriesField,i=s.data.map(r=>u(o({},r),{fields:u(o({},r.fields),{[t]:{sortIndex:0},[n]:{sortIndex:1}})}));return u(o({},s),{data:i})},hs=()=>C([us,N,Le,dt,P,V,F],{}),ut=(s,e)=>{const{encodes:t}=e,n=t[0]||{};return u(o({},s),{type:"area",xField:n.x||"category",yField:n.y||"value",seriesField:n.color||n.group})},ht=()=>C([ut,N,Le,Pe,ae,oe,P,V,F],{}),fs=ht,ms=()=>C([ut,N,Le,Fe,ae,oe,P,V,F],{}),ps=(s,e)=>{const t=e.encodes[0]||{};return u(o({},s),{type:"scatter",xField:t.x||"x",yField:t.y||"y",seriesField:t.color||t.group})},gs=()=>C([ps,N,dt,P,V,F],{}),ys=(s,e)=>{const t=e.encodes[0]||{};return u(o({},s),{type:"pie",categoryField:t.category||t.x||"category",valueField:t.value||t.y||"value"})},_s=(s,e)=>{const{visualStyle:t}=e;return t?o(o({},s),t.pie):s},vs=()=>C([ys,N,P,V,F,ve,_s],{}),bs=(s,e)=>{const t=e.encodes[0]||{};return u(o({},s),{type:"pie",categoryField:t.category||t.x||"category",valueField:t.value||t.y||"value",outerRadius:.8,innerRadius:.5,padAngle:.6})},Ss=()=>C([bs,N,P,V,F],{}),ks=(s,e)=>{const{encodes:t,data:n}=e,i=[];if(t&&t.length>0){const r=t[0];r.columnDimension&&Array.isArray(r.columnDimension)&&r.columnDimension.forEach(a=>{a&&!a.startsWith("__")&&i.push({field:a,title:a,width:"auto",cellType:"text"})}),r.measure&&Array.isArray(r.measure)&&r.measure.forEach(a=>{a&&i.push({field:a,title:a,width:"auto",cellType:"text",style:{textAlign:"right"}})})}return u(o({},s),{columns:i,records:n||[]})},xs=()=>C([ks],{}),ws=(s,e)=>{const{encodes:t,data:n}=e;if(!t||t.length===0)return u(o({},s),{records:n||[]});const i=t[0],{rowDimension:r=[],columnDimension:a=[],measure:d=[]}=i,c=[];Array.isArray(r)&&r.forEach(w=>{w&&c.push({dimensionKey:w,title:w,width:"auto"})});const l=[];Array.isArray(a)&&a.forEach(w=>{w&&l.push({dimensionKey:w,title:w,width:"auto"})});const m=[];return Array.isArray(d)&&d.forEach(w=>{w&&m.push({indicatorKey:w,title:w,width:"auto",format:E=>typeof E=="number"?E.toLocaleString():E})}),u(o({},s),{type:"pivot-table",rows:c,columns:l,indicators:m,records:n||[],corner:{titleOnDimension:"row"},theme:"DEFAULT"})},Cs=()=>C([ws],{}),Ts=(s,e)=>{const{encodes:t,data:n,fieldSelection:i}=e,r=(i==null?void 0:i.indicatorChartSpecs)||{};if(!t||t.length===0)return u(o({},s),{records:n||[]});const a=t[0],{rowDimension:d=[],columnDimension:c=[],measure:l=[]}=a,m=[];Array.isArray(d)&&d.forEach(S=>{S&&m.push({dimensionKey:S,title:S})});const w=[];Array.isArray(c)&&c.forEach(S=>{S&&w.push({dimensionKey:S,title:S})});const E=[],z={};return Array.isArray(l)&&l.forEach((S,D)=>{var I;if(S){let A;if(r[S])A=o({},r[S]),A.data&&Array.isArray(A.data)&&((I=A.data[0])!=null&&I.values)&&(z[S]=A.data[0].values,A.data={id:S});else{const M=["bar","line","area"][D%3];A=u(o({type:M,data:{id:S,fields:{[S]:{alias:S}}}},M==="bar"?{xField:"_indicatorKey",yField:"_indicatorValue",seriesField:"_indicatorKey"}:M==="line"?{xField:"_indicatorKey",yField:"_indicatorValue",point:{visible:!0}}:{xField:"_indicatorKey",yField:"_indicatorValue",stack:!1}),{axes:[{orient:"bottom",type:"band"},{orient:"left",type:"linear"}],theme:"light"}),z[S]=n||[]}E.push({indicatorKey:S,title:S,width:"auto",cellType:"chart",chartModule:"vchart",chartSpec:A,style:{padding:1}})}}),u(o({},s),{type:"pivot-chart",rows:m,columns:w,indicators:E,indicatorsAsCol:!1,records:Object.keys(z).length>0?z:n||[],corner:{titleOnDimension:"row"},defaultRowHeight:200,defaultHeaderRowHeight:50,defaultColWidth:280,defaultHeaderColWidth:100,indicatorTitle:"Indicator",autoWrapText:!0})},As=()=>C([Ts],{}),Ds=(s,e,t)=>{const n=Re[s];return{currentStructure:{dimensions:e.length,measures:t.length,dimensionNames:e,measureNames:t},targetStructure:n}},Z=(s,e)=>{const{chartType:t,fieldSelection:n}=e,i=Ds(t,n.dimensions,n.measures);return u(o({},s),{analysisResult:i})},j=(s,e)=>{const{chartType:t,encodes:n,fieldMap:i,data:r,visualStyle:a}=e;return{chartType:t,data:r||[],fieldMap:i||{},encodes:n||{},visualStyle:a||{}}},ft=(s,e)=>e.data||[],mt=s=>s.fieldSelection||{dimensions:[],measures:[]},pt=(s,e)=>{s.fieldMap&&(Object.keys(s.fieldMap).forEach(t=>{e.dimensions.includes(t)?s.fieldMap[t].location="dimension":e.measures.includes(t)&&(s.fieldMap[t].location="measure")}),e.dimensions.forEach(t=>{s.fieldMap[t]||(s.fieldMap[t]={id:t,type:"string",alias:t,location:"dimension"})}),e.measures.forEach(t=>{s.fieldMap[t]||(s.fieldMap[t]={id:t,type:"number",alias:t,location:"measure"})})),s.fieldSelection&&(s.fieldSelection=e)},_e=(s,e)=>{const t=ft(s,e),n=mt(e);if(n.measures.length<=0)return s;const i=[],{dimensions:r,measures:a}=n;t.forEach(c=>{a.forEach(l=>{const m={};Object.keys(c).forEach(w=>{m[w]=c[w]}),m.__MeasureName__=l,m.__MeasureValue__=c[l]||0,i.push(m)})});const d={dimensions:[...r,"__MeasureName__"],measures:["__MeasureValue__"]};return pt(e,d),e.data=i,u(o({},s),{data:e.data,fieldSelection:e.fieldSelection,fieldMap:e.fieldMap})},Ze=(s,e,t)=>{const n=ft(s,e),i=mt(e);if(i.dimensions.length<=0)return s;const{dimensions:r,measures:a}=i,d=r[r.length-1],c=r.filter(S=>S!==d),l=[...new Set(n.map(S=>S[d]))],m=[],w=n.reduce((S,D)=>{const I=c.map(A=>D[A]).join("|");return S[I]||(S[I]=[]),S[I].push(D),S},{});Object.entries(w).forEach(([,S])=>{const D=S,I={};if(D.length>0){const A=D[0];Object.keys(A).forEach(M=>{!r.includes(M)&&!a.includes(M)&&(I[M]=A[M])})}if(c.length>0){const A=D[0];c.forEach(M=>{I[M]=A[M]})}l.forEach(A=>{const M=D.find(de=>de[d]===A);a.forEach(de=>{const St=`${A}_${de}`;I[St]=M&&M[de]||0})}),m.push(I)});const E=[];return l.forEach(S=>{a.forEach(D=>{E.push(`${S}_${D}`)})}),pt(e,{dimensions:c,measures:E}),e.data=m,u(o({},s),{data:e.data,fieldSelection:e.fieldSelection,fieldMap:e.fieldMap})},Ms=(s,e)=>e.data,Es=s=>s.fieldSelection||{dimensions:[],measures:[]},Rs=(s,e,t,n)=>{s.fieldMap&&(s.fieldMap[n]||(s.fieldMap[n]={id:n,type:t.type,alias:n,location:t.location})),s.fieldSelection&&(s.fieldSelection=e)},Os=(s,e,t)=>{var m;const n=Ms(s,e),i=Es(e);if(i.dimensions.length===0)return s;const r=t||i.dimensions[0];if(!i.dimensions.includes(r))throw new Error(` ${r} `);const a=`${r}_copy`,d=n.map(w=>u(o({},w),{[a]:w[r]})),c={dimensions:[...i.dimensions,a],measures:[...i.measures]},l=(m=e.fieldMap)==null?void 0:m[r];return Rs(e,c,l,a),e.data=d,u(o({},s),{data:e.data,fieldSelection:e.fieldSelection,fieldMap:e.fieldMap,copyInfo:{type:"dimension",originalField:r,copiedField:a}})},be=(s,e)=>{if(e.fieldSelection.dimensions.length===2&&e.fieldSelection.measures.length===1)return u(o({},s),{data:e.data,reshapeInfo:{steps:[]}});const i=[];if(e.fieldSelection.dimensions.length>0){let r=e.fieldSelection.dimensions.length;for(;r>1;){s=Ze(s,e);const a=e.fieldSelection.dimensions.length;if(a>=r)break;r=a,i.push("reduce")}e.fieldSelection.measures.length>=1&&(s=_e(s,e),i.push("elevate"))}else e.fieldSelection.measures.length>=1&&(s=_e(s,e),i.push("elevate")),e.fieldSelection.dimensions.length>0&&e.fieldSelection.dimensions.length<2&&(s=Os(s,e),i.push("copyDimension"));return u(o({},s),{data:e.data,reshapeInfo:{steps:i}})},$=(s,e)=>{var t,n,i,r,a;return{chartType:e.chartType,data:e.data,fieldMap:e.fieldMap,encodes:e.encodes,style:e.visualStyle,dimensions:(t=e.fieldSelection)==null?void 0:t.dimensions,measures:(n=e.fieldSelection)==null?void 0:n.measures,rowDimensions:(i=e.fieldSelection)==null?void 0:i.rowDimensions,columnDimensions:(r=e.fieldSelection)==null?void 0:r.columnDimensions,indicatorChartSpecs:((a=e.fieldSelection)==null?void 0:a.indicatorChartSpecs)||{},theme:e.theme,version:e.version}},Ns=s=>{const{dimensions:e,measures:t}=s;return{x:t[0],y:e[0],group:e[1]}},Ps=(s,e)=>{const{fieldSelection:t}=e;if(!t||t.dimensions.length===0&&t.measures.length===0)return s;const n=Ns(t),i={};Object.entries(n).forEach(([a,d])=>{d!=null&&(i[a]=d)});const r=[i];return e.encodes=r,u(o({},s),{encodes:r})},le=()=>C([j,Z,be,Ps,$],{}),Vs=s=>{const{dimensions:e,measures:t}=s;return{x:e[0],y:t[0],group:e[1]}},Fs=(s,e)=>{const{fieldSelection:t}=e;if(!t||t.dimensions.length===0&&t.measures.length===0)return s;const n=Vs(t),i={};Object.entries(n).forEach(([a,d])=>{d!=null&&(i[a]=d)});const r=[i];return e.encodes=r,u(o({},s),{encodes:r})},ue=()=>C([j,Z,be,Fs,$],{}),Is=s=>{const{dimensions:e,measures:t}=s;return{x:e[0],y:t[0],color:e[1]||(t.length>1?"__MeasureName__":void 0)}},gt=(s,e)=>{const{fieldSelection:t}=e;if(!t||t.dimensions.length===0&&t.measures.length===0)return s;const n=Is(t),i={};Object.entries(n).forEach(([a,d])=>{d!=null&&(i[a]=d)});const r=[i];return e.encodes=r,u(o({},s),{encodes:r})},Ls=()=>C([j,Z,be,gt,$],{}),ke=()=>C([j,Z,be,gt,$],{}),xe=s=>s.fieldSelection,Zs=(s,e)=>{const{data:t,chartType:n,fieldSelection:i}=e;if(!t||!n)return s;const r=Re[n];if(!r)return u(o({},s),{data:e.data,reshapeInfo:{reshapeType:"none",reason:""}});let a=i.dimensions.length,d=i.measures.length;const c=r.idealDimensions,l=r.idealMeasures;if(a===c&&d===l)return u(o({},s),{data:e.data,reshapeInfo:{reshapeType:"none"}});const m=[];if(a>c){let z=xe(e);for(;z.dimensions.length>c;){const S=z.dimensions.length;s=Ze(s,e);const D=xe(e);if(D.dimensions.length>=S)break;z=D,m.push("reduce")}}xe(e).measures.length>l&&(s=_e(s,e),m.push("elevate"));const E=m.length===1?m[0]:m.length>1?"composite":"none";return u(o({},s),{data:e.data,reshapeInfo:{strategy:`${a}${d}  ${c}${l}`,steps:m,reshapeType:E}})},js=s=>{const{dimensions:e,measures:t}=s;return{x:t[0],y:t[1],color:e[0]}},$s=(s,e)=>{const{fieldSelection:t}=e;if(!t||t.dimensions.length===0&&t.measures.length===0)return s;const n=js(t),i={};Object.entries(n).forEach(([a,d])=>{d!=null&&(i[a]=d)});const r=[i];return e.encodes=r,u(o({},s),{encodes:r})},zs=()=>C([j,Z,Zs,$s,$],{}),Bs=s=>{const{dimensions:e,measures:t}=s;return{category:e[0]||"__MeasureName__",value:t[0]||"__MeasureValue__"}},yt=(s,e)=>{const{fieldSelection:t}=e;if(!t||t.dimensions.length===0&&t.measures.length===0)return s;const n=Bs(t),i={};Object.entries(n).forEach(([a,d])=>{d!=null&&(i[a]=d)});const r=[i];return e.encodes=r,u(o({},s),{encodes:r})},_t=(s,e)=>{if(e.fieldSelection.dimensions.length===1&&e.fieldSelection.measures.length===1)return u(o({},s),{data:e.data,reshapeInfo:{steps:[]}});const i=[];let r=e.fieldSelection.dimensions.length;for(;r>0;){s=Ze(s,e);const a=e.fieldSelection.dimensions.length;if(a>=r)break;r=a,i.push("reduce")}return e.fieldSelection.measures.length>=1&&(s=_e(s,e),i.push("elevate")),u(o({},s),{data:e.data,reshapeInfo:{steps:i}})},Us=()=>C([j,Z,_t,yt,$],{}),qs=()=>C([j,Z,_t,yt,$],{}),Ws=s=>{const{dimensions:e,measures:t}=s;return{columnDimension:e,measure:t}},Ks=(s,e)=>{const{fieldSelection:t}=e;if(!t||t.dimensions.length===0&&t.measures.length===0)return s;const n=Ws(t),i={};Object.entries(n).forEach(([a,d])=>{d!=null&&Array.isArray(d)&&d.length>0&&(i[a]=d)});const r=[i];return e.encodes=r,u(o({},s),{encodes:r})},Hs=()=>C([j,Z,Ks,$],{}),Gs=s=>{const{rowDimensions:e=[],columnDimensions:t=[],measures:n}=s;return{rowDimension:e,columnDimension:t,measure:n}},vt=(s,e)=>{const{fieldSelection:t}=e;if(!t)return s;const{rowDimensions:n=[],columnDimensions:i=[],measures:r=[]}=t;if(n.length===0&&i.length===0)if(t.dimensions&&t.dimensions.length>0)t.rowDimensions=[...t.dimensions];else return s;const a=Gs(t),d={};Object.entries(a).forEach(([l,m])=>{m!=null&&Array.isArray(m)&&m.length>0&&(d[l]=m)});const c=[d];return e.encodes=c,u(o({},s),{encodes:c})},Js=()=>C([j,Z,vt,$],{}),Ys=()=>C([j,Z,vt,$],{}),Qs={[v.BAR]:ns,[v.BAR_STACKED]:ct,[v.BAR_GROUPED]:as,[v.BAR_PERCENT]:os,[v.COLUMN]:ds,[v.COLUMN_STACKED]:lt,[v.COLUMN_GROUPED]:cs,[v.COLUMN_PERCENT]:ls,[v.LINE]:hs,[v.AREA]:fs,[v.AREA_STACKED]:ht,[v.AREA_PERCENT]:ms,[v.SCATTER]:gs,[v.PIE]:vs,[v.DONUT]:Ss,[v.TABLE]:xs,[v.PIVOT_TABLE]:Cs,[v.PIVOT_CHART]:As},Xs={[v.BAR]:le,[v.BAR_STACKED]:le,[v.BAR_GROUPED]:le,[v.BAR_PERCENT]:le,[v.COLUMN]:ue,[v.COLUMN_STACKED]:ue,[v.COLUMN_GROUPED]:ue,[v.COLUMN_PERCENT]:ue,[v.LINE]:Ls,[v.AREA]:ke,[v.AREA_STACKED]:ke,[v.AREA_PERCENT]:ke,[v.SCATTER]:zs,[v.PIE]:Us,[v.DONUT]:qs,[v.TABLE]:Hs,[v.PIVOT_TABLE]:Js,[v.PIVOT_CHART]:Ys},en=(s,e)=>{const t=Qs[s];if(!t)throw new Error(`: ${s}`);try{return t()(e)}catch(n){throw new Error(` ${s} : ${n}`)}},tn=(s,e)=>{const t=Xs[s];if(!t)throw new Error(`VizSeed: ${s}`);try{return t()(e)}catch(n){throw new Error(`VizSeed ${s} : ${n}`)}},sn=s=>!!s&&s.constructor===Object,bt=(s,e)=>{var t;return!s||!e?(t=s!=null?s:e)!=null?t:{}:Object.entries(o(o({},s),e)).reduce((n,[i,r])=>u(o({},n),{[i]:sn(s[i])?bt(s[i],r):r}),{})};class Me{constructor(e,t){this.fieldSelection={dimensions:[],measures:[],groupMeasure:[],rowDimensions:[],columnDimensions:[],indicatorChartSpecs:{}},this.fieldMap={},this.data=[],this.chartType=v.BAR,this.encodes=[],this.visualStyle=ss(),this.theme="light",this.version="1.0.0",this.vizSeedDSL=null,Array.isArray(e)?this.dataset=new ye(e,t):this.dataset=e}createFieldDefinition(e){const t=this.dataset.fields.find(n=>n.name===e);if(!t)throw new Error(` ${e} `);return{id:t.name,type:t.type,alias:t.name,location:t.role,domain:this.extractFieldDomain(t.name),format:{}}}extractFieldDomain(e){const t=this.dataset.rows.map(n=>n[e]);return[...new Set(t)].slice(0,10)}addFieldToMap(e){this.fieldMap[e]||(this.fieldMap[e]=this.createFieldDefinition(e))}static from(e){const t=JSON.parse(JSON.stringify(e)),n=new Me(t.data||[]);return n.vizSeedDSL=t,n}getDataSet(){return this.dataset}getAvailableFields(){return this.dataset.fields.map(e=>e.name)}getAvailableDimensions(){return this.dataset.fields.filter(e=>e.role==="dimension").map(e=>e.name)}getAvailableMeasures(){return this.dataset.fields.filter(e=>e.role==="measure").map(e=>e.name)}getSelectedFields(){return Object.keys(this.fieldMap)}setDimensions(e){return this.fieldSelection.dimensions=[...e],e.forEach(t=>this.addFieldToMap(t)),this.updateDataMap(),this}setMeasures(e){let t=e.flat(5);return this.fieldSelection.measures=t,this.fieldSelection.groupMeasure=e,t.forEach(n=>this.addFieldToMap(n)),this.updateDataMap(),this}addDimensionToArray(e){return this.fieldSelection.dimensions.includes(e)||(this.fieldSelection.dimensions.push(e),this.addFieldToMap(e),this.updateDataMap()),this}addMeasureToArray(e){return this.fieldSelection.measures.includes(e)||(this.fieldSelection.measures.push(e),this.addFieldToMap(e),this.updateDataMap()),this}getDimensions(){return[...this.fieldSelection.dimensions]}getMeasures(){return[...this.fieldSelection.measures]}setIndicatorChart(e,t){this.fieldSelection.indicatorChartSpecs||(this.fieldSelection.indicatorChartSpecs={});const n=Me.from(t).buildSpec();return this.fieldSelection.indicatorChartSpecs[e]=n,this}getIndicatorChartSpecs(){return o({},this.fieldSelection.indicatorChartSpecs)}setRowDimensions(e){return this.fieldSelection.rowDimensions=[...e],e.forEach(t=>this.addFieldToMap(t)),this.updateDataMap(),this}setColumnDimensions(e){return this.fieldSelection.columnDimensions=[...e],e.forEach(t=>this.addFieldToMap(t)),this.updateDataMap(),this}addRowDimensionToArray(e){return this.fieldSelection.rowDimensions||(this.fieldSelection.rowDimensions=[]),this.fieldSelection.rowDimensions.includes(e)||(this.fieldSelection.rowDimensions.push(e),this.addFieldToMap(e),this.updateDataMap()),this}addColumnDimensionToArray(e){return this.fieldSelection.columnDimensions||(this.fieldSelection.columnDimensions=[]),this.fieldSelection.columnDimensions.includes(e)||(this.fieldSelection.columnDimensions.push(e),this.addFieldToMap(e),this.updateDataMap()),this}getRowDimensions(){return[...this.fieldSelection.rowDimensions||[]]}getColumnDimensions(){return[...this.fieldSelection.columnDimensions||[]]}getFieldMap(){return o({},this.fieldMap)}setFieldMap(e){return this.fieldMap=o({},e),this}getFieldSelection(){return o({},this.fieldSelection)}setFieldSelection(e){return this.fieldSelection=o({},e),this}setFieldAlias(e,t){const n=this.fieldMap[e];if(n)n.alias=t;else if(this.hasField(e)){this.addFieldToMap(e);const i=this.fieldMap[e];i&&(i.alias=t)}else throw new Error(` ${e} `);return this}getAvailableFieldNames(){return this.dataset.fields.map(e=>e.name)}hasField(e){return this.dataset.fields.some(t=>t.name===e)}updateDataMap(){this.data=this.dataset.rows}setChartType(e){let t;if(typeof e=="string")try{t=ts(e)}catch(n){throw new Error(`: '${e}'. : bar, bar_stacked, bar_grouped, bar_percent, column, line, area, scatter, pie, donut, table`)}else t=e;if(!Re[t])throw new Error(`: ${t}`);return this.chartType=t,this}setTitle(e){return this.visualStyle.title=e,this}setLegend(e=!0){return this.visualStyle.legend.visible=e,this}setLabel(e=!0){return this.visualStyle.label.visible=e,this}setTooltip(e=!0){return this.visualStyle.tooltip.visible=e,this}setStyle(e){return this.visualStyle=bt(this.visualStyle,e),this}build(){if(this.vizSeedDSL)return this.vizSeedDSL;this.validateFieldRequirements();const e={chartType:this.chartType,encodes:this.encodes,fieldMap:this.fieldMap,fieldSelection:this.fieldSelection,data:this.data,visualStyle:this.visualStyle,theme:this.theme,version:this.version};return this.vizSeedDSL=tn(e.chartType,e),this.vizSeedDSL}buildSpec(){try{this.vizSeedDSL||this.build();const e={chartType:this.vizSeedDSL.chartType,encodes:this.vizSeedDSL.encodes,fieldMap:this.vizSeedDSL.fieldMap,fieldSelection:{dimensions:this.vizSeedDSL.dimensions,measures:this.vizSeedDSL.measures,groupMeasure:this.vizSeedDSL.groupMeasure,rowDimensions:this.vizSeedDSL.rowDimensions,columnDimensions:this.vizSeedDSL.columnDimensions,indicatorChartSpecs:this.vizSeedDSL.indicatorChartSpecs},data:this.vizSeedDSL.data,visualStyle:this.vizSeedDSL.style,theme:this.vizSeedDSL.theme,version:this.vizSeedDSL.version};return en(e.chartType,e)}catch(e){throw new Error(`: ${e.message}`)}}validateFieldRequirements(){if(!this.chartType)throw new Error(" setChartType()");const e=this.chartType,{dimensions:t,measures:n}=this.fieldSelection;if(t.length+n.length===0)throw new Error(" setDimensions()  setMeasures() ");if(n.length===0&&!["wordcloud","listtable"].includes(e))throw new Error(`${e} setMeasures()  addMeasureToArray() `)}}export{Me as VizSeedBuilder};
//# sourceMappingURL=VizSeedBuilder-blzou0YP.js.map
